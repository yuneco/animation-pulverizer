const I=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};I();const C=(t,e)=>{const r=[],s=[];let n=document.elementFromPoint(t,e);for(;n&&!(n.tagName.toLowerCase()==="html"||!(n instanceof HTMLElement||n instanceof SVGElement));)s.push(n),r.push({el:n,pointerEvents:n.style.pointerEvents}),n.style.pointerEvents="none",n=document.elementFromPoint(t,e);return r.forEach(o=>o.el.style.pointerEvents=o.pointerEvents),s},u="animation-pulverizer_animatedClickTarget",S="animation-pulverizer_animatedClickHit",E="animation-pulverizer_noiseFilter",a=t=>t instanceof HTMLElement||t instanceof SVGElement,g=t=>t.classList.contains(S)?"hit":t.classList.contains(u)?"target":"wait",m=(t,e)=>{const r=g(t);if(r!==e){if(e==="hit"){if(r!=="target")return;_(t)}if(e==="target"){if(r!=="wait")return;N(t)}if(e==="wait"){if(r!=="target")return;O(t)}}},_=t=>{t.classList.remove(u),t.classList.add(S),t.animate([{opacity:t.style.opacity,transform:"scale(0.8)",filter:`blur(0) url('#${E}')`},{opacity:0,transform:"scale(1.5)",filter:`blur(10px) url('#${E}')`}],{fill:"forwards",duration:500})},N=t=>{t.classList.add(u),t.removeEventListener("click",d),t.addEventListener("click",d)},O=t=>{t.classList.remove(u),t.removeEventListener("click",d)},d=t=>{console.log("direct",t),!!a(t.target)&&(m(t.target,"hit"),t.preventDefault(),t.stopImmediatePropagation(),t.target.removeEventListener("click",d))},k=["width","height","left","top","right","bottom","transform"],L=t=>!k.includes(t.propertyName),l=[],v=t=>{if(!!a(t.target))return{element:{el:t.target,pseudo:t.pseudoElement},prop:t instanceof TransitionEvent?t.propertyName:t.animationName,type:t instanceof TransitionEvent?"transition":"animation"}},x=(t,e)=>t.element.el===e.element.el&&t.element.pseudo===e.element.pseudo&&t.prop===e.prop&&t.type===e.type,P=t=>{const e=s=>{if(!a(s.target)||s instanceof TransitionEvent&&L(s)||g(s.target)!=="wait")return;const n=v(s);!n||(l.push(n),t([n.element],[],l.map(o=>o.element)))},r=s=>{if(s instanceof TransitionEvent&&L(s))return;const n=v(s);if(!n)return;const o=l.findIndex(p=>x(p,n));if(o===-1)return;const i=l.splice(o,1)[0];!i||t([],[i.element],l.map(p=>p.element))};document.body.addEventListener("transitionstart",e),document.body.addEventListener("transitionend",r),document.body.addEventListener("animationstart",e),document.body.addEventListener("animationend",r)},D=(t,e)=>({added:e.filter(r=>!t.includes(r)),removed:t.filter(r=>!e.includes(r))}),b=["width","height","left","top","right","bottom","transform"];let c=[];const R=100,F=t=>{const e=b.map(r=>{var s;return[r,(s=t.style[r])==null?void 0:s.toString()]}).filter(r=>r[1]);if(!!e.length)return Object.fromEntries(e)},q=(t,e)=>b.some(r=>t[r]!==e[r]),H=(t,e)=>{const r=F(t);if(!!r&&!(e&&!q(r,e.props)))return{el:t,isActive:!!e,expired:Date.now()+R,props:r}},G=t=>c.find(e=>e.el===t),$=t=>{const e=c.findIndex(r=>r.el===t);if(e!==-1)return c.splice(e,1)[0]},z=t=>{const e=G(t),r=H(t,e);!r||($(t),g(t)!=="hit"&&r&&c.push(r))},V=()=>{const t=Date.now();c=c.filter(e=>e.expired>t)},B=()=>{new MutationObserver(function(e){e.map(s=>s.target).filter(a).forEach(z)}).observe(document.body,{subtree:!0,attributes:!0,attributeFilter:["style"]})},X=()=>c.filter(t=>t.isActive).map(t=>t.el),j=t=>{let e=[];B();const r=()=>{V();const s=X(),{added:n,removed:o}=D(e,s);if(n.length||o.length){try{t(n,o,s)}catch(i){console.warn(i)}e=[...s]}requestAnimationFrame(r)};r()};let h=[],y=[];const K=t=>{P((e,r,s)=>{h=[...s],t(e,r,[...h,...y])}),j((e,r,s)=>{y=[...s.map(n=>({el:n,pseudo:""}))],t(e.map(n=>({el:n,pseudo:""})),r.map(n=>({el:n,pseudo:""})),[...h,...y])})};const U=t=>`
<filter id='${t}' x='0%' y='0%' width='110%' height='110%'>
  <feTurbulence type="turbulence" baseFrequency="0.2 0.2" result="NOISE" numOctaves="2" />
  <feDisplacementMap in="SourceGraphic" in2="NOISE" scale="8" xChannelSelector="R" yChannelSelector="R"></feDisplacementMap>
</filter>
`,W=()=>{const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.innerHTML=U(E),document.body.appendChild(e)};let A=!1;const Y=()=>{if(A)return;A=!0,console.log("\u{1F52B}GAME START!"),W();let t=[];K((e,r,s)=>{t=[...s],e.map(n=>{m(n.el,"target")}),r.map(n=>{m(n.el,"wait")})}),document.body.addEventListener("pointerdown",e=>{const r=C(e.clientX,e.clientY),s=t.map(o=>o.el),n=r.filter(o=>s.includes(o));n.forEach(o=>m(o,"hit")),n.length&&(e.preventDefault(),e.cancelBubble=!0)})},T=t=>t!=null;const J=10,Q=".template .card",w="#app > .stage",Z="https://picsum.photos/seed/{seed}/300/200",tt=4,et=["slide-toR","slide-toL","slide-toT","pop"],nt=t=>t[Math.floor(Math.random()*t.length)],f=(t,e)=>t+Math.floor(Math.random()*(e-t)),M=(t,e=1,r)=>{const s=Math.floor(e);if(s<1)return[];const n=r!=null?r:t.parentElement;return n?Array(s).fill(null).map(o=>n.appendChild(t.cloneNode(!0))):[]},rt=()=>{const t=document.querySelector(w),e=document.querySelector(Q);if(!t||!e)return;const r=M(e,J,t),s=r.map(o=>o.querySelector(".img")).filter(T),n=r.map(o=>o.querySelector(".text")).filter(T);[...s,...n].forEach(o=>M(o,f(0,tt))),t.querySelectorAll(".img").forEach(o=>o.setAttribute("src",Z.replace("{seed}",f(1,1e4).toString())))},ot=()=>{const t=new IntersectionObserver(s=>{s.forEach(n=>{if(!n.isIntersecting)return;const o=n.target;!a(o)||o.classList.contains("show")||setTimeout(()=>{o.style.animationDuration=`${f(300,1200)}ms`,o.classList.add("show",nt(et))},f(0,500))})},{rootMargin:"0px 0px -15%"}),e=document.querySelector(w);if(!e)return;e.querySelectorAll(".target").forEach(s=>t.observe(s))},st=()=>{rt(),ot()};st();Y();
